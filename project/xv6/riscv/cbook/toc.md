# xv6: 一個像 UNIX 的簡單教學用作業系統 (a simple, Unix-like teaching operating system)

    Russ Cox , Frans Kaashoek , Robert Morris

    October 27, 2019

## 内容说明。

- [1 个操作系统接口](ch01.md)。
   - 1.1 进程和内存。
   - 1.2 I/O和文件描述符。
   - 1.3 管線。
   - 1.4 文件系统。
   - 1.5 真实世界。
   - 1.6 练习。
- [2 操作系统组织](ch02.md)。
   - 2.1 抽象物理资源。
   - 2.2 用户模式、主管模式和系统调用。
   - 2.3 核心组织。
   - 2.4 编码：xv6组织。
   - 2.5 流程概述。
   - 2.6 代码：启动xv6和第一个进程。
   - 2.7 真实世界。
   - 2.8 练习。
- [3. 页表](ch03.md)。
   - 3.1 寻呼硬件。
   - 3.2 内核地址空间。
   - 3.3 代码：创建地址空间。
   - 3.4 物理内存分配。
   - 3.5 代码：物理内存分配器。
   - 3.6 进程地址空间。
   - 3.7 代码：sbrk。
   - 3.8 代码：exec。
   - 3.9 真实世界。
   - 3.10 练习。
- [4 陷阱和设备驱动程序](ch04.md)。
   - 4.1 RISC-V 陷阱機制。
   - 4.2 来自内核空间的陷阱。
   - 4.3 来自用户空间的陷阱。
   - 4.4 定时器中断。
   - 4.5 代码：调用系统调用。
   - 4.6 代码：系统调用参数。
   - 4.7 设备驱动程序。
   - 4.8 代码：控制台驱动程序。
   - 4.9 真实世界。
   - 4.10 练习。
- [5 - 锁定](ch05.md)。
   - 5.1 競爭情況。
   - 5.2 代码：锁定。
   - 5.3 代码：使用锁。
   - 5.4 死锁和锁定顺序。
   - 5.5 锁定和中断处理程序。
   - 5.6 指令和内存排序。
   - 5.7 睡眠锁。
   - 5.8 真实世界。
   - 5.9 练习。
- [6 时间表](ch06.md)。
   - 6.1 多路复用。
   - 6.2 代码：上下文切换。
   - 6.3 代码：排班。
   - 6.4 代码：mycpu和myproc。
   - 6.5 睡眠和唤醒。
   - 6.6 代码：睡眠和唤醒。
   - 6.7 编码：管道。
   - 6.8 代码：等待、退出和终止。
   - 6.9 真实世界。
   - 6.10 练习。
- [7 文件系统](ch07.md)。
   - 7.1 概述。
   - 7.2 缓冲区缓存层。
   - 7.3 代码：缓冲区缓存。
   - 7.4 记录层。
   - 7.5 日志设计。
   - 7.6 代码：日志记录。
   - 7.7 代码：块分配器。
   - 7.8 信息节点层。
   - 7.9 代码：信息节点。
   - 7.10 代码：inode内容。
   - 7.11 编码：目录层。
   - 7.12 代码：路径名。
   - 7.13 文件描述符层。
   - 7.14 代码：系统调用。
   - 7.15 真实世界。
   - 7.16 练习。
- [8 重新访问并发](ch08.md)。
   - 8.1 锁定模式。
   - 8.2 锁状图案。
   - 8.3 完全没有锁。
   - 8.4 并行度。
   - 8.5 练习。
- [9. 摘要](ch09.md)。
- [参考书目](ref.md)。
- [附录1-Sv39：分页式39位虚拟内存系统](sv39riscv.md)

## 前言和答谢

这是一篇针对操作系统课程的草稿文本。它通过研究一个名为xv6的示例内核来解释操作系统的主要概念。xv6是Dennis Ritchie和Ken Thompson的Unix version6(V6)[10]的重新实现。xv6松散地遵循v6的结构和风格，但在ANSIC[5]中针对多核RISC-V[9]实现。

本文应该与xv6的源代码一起阅读，这种方法的灵感来自John Lions对UNIX第6版的评论[7]。有关v6和xv6的在线资源的链接，请参见https://pdos.csail.mit.edu/6.828，其中包括几个使用xv6的实践作业。

我们已经在麻省理工学院的操作系统课程6.828中使用过这篇课文。我们感谢6.828届的教职员工、助教和学生，他们都为xv6做出了直接或间接的贡献。

我们要特别感谢奥斯汀·克莱门茨和尼克莱·泽尔多维奇。最后，我们要感谢通过电子邮件给我们发送文本错误或改进建议的人：阿布塔利布、阿加耶夫、塞巴斯蒂安·博姆、安东·伯采夫、拉斐尔·卡瓦略、泰伊·查吉德、拉希特·埃斯基奥格鲁、颜色模糊、朱塞佩、郭涛、罗伯特·希尔德曼、沃尔夫冈·凯勒、奥斯汀·刘、帕万·马达姆塞蒂、雅切克·马苏拉涅克、迈克尔·麦康维尔、。

如果您发现错误或有改进建议，请发送电子邮件至Frans Kaashoek和Robert Morris(kaashoek，rtm@csail.mit.edu)。